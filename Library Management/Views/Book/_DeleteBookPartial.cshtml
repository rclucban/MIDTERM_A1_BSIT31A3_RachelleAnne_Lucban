<div class="modal-header bg-danger text-white">
    <h5 class="modal-title">Delete Book</h5>
    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>

<div class="modal-body">
    <div class="alert alert-warning" role="alert">
        <i class="bi bi-exclamation-triangle"></i>
        <strong>Warning!</strong> This action cannot be undone.
    </div>
    <p>Are you sure you want to delete this book and all its copies?</p>
</div>

<div class="modal-footer">
    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
    <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Delete Book</button>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const confirmBtn = document.getElementById('confirmDeleteBtn');
    if (confirmBtn) {
        confirmBtn.addEventListener('click', function() {
            const bookId = '@ViewBag.BookId';
            
            fetch(`/Book/Delete/${bookId}`, {
                method: 'DELETE'
            })
            .then(response => {
                if (response.ok) {
                    const modal = bootstrap.Modal.getInstance(document.querySelector('.modal'));
                    if (modal) {
                        modal.hide();
                    }
                    location.reload();
                } else {
                    alert('Error deleting book. Please try again.');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('An error occurred. Please try again.');
            });
        });
    }
});
</script>
